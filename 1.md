# Tutorial to containerize 5G entities using Docker
We are using Ubuntu 18.04 as our testing environment.
## Installation
Install Docker
```
$ sudo apt-get update
$ sudo apt-get install ca-certificates curl gnupg lsb-release
$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
$ echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
$ sudo apt-get update
$ sudo apt-get install docker-ce docker-ce-cli containerd.io
$ sudo docker run hello-world		# Test if Docker is successfully installed.
```
Install Docker-compose
```
$ sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
$ sudo chmod +x /usr/local/bin/docker-compose
$ sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose
$ docker-compose --version		# Test if Docker-compose is successfully installed.
```
## Open5gs
There're many different open-source 5G core network projects, such as [Free5gc](https://www.free5gc.org/), [Open5gCore](https://www.open5gcore.org/), and [Open5gs](https://open5gs.org/). Here we choose **Open5gs** to deploy containerization as others are either lack of community supports or already deployed containerization. 

To begin with, we have to install Open5GS. Go to [Open5gs Github Page](https://github.com/open5gs/open5gs) to clone the whole repository. 
```
$ git clone https://github.com/open5gs/open5gs
```
You can try to build Open5gs from source following the instructions on the documentation: https://open5gs.org/open5gs/docs/guide/02-building-open5gs-from-sources/. 
## Intro to Docker compose
We run images as a conatiner on Docker engine. In Docker compose, we can run *multiple* images at the same time. The secret behind is **docker-compose.yml**.
Here is an example for docker-compose.yml:
```
version: '3.8'
services:
		web:
			image: nginx
			ports: 
        		- "8000:80"
```
To run this docker-compose.yml, go the folder that you store the file, and run:
```
$ sudo docker-compose up
```
<Insert picture>
You will see the nginx container is running. Go to http://localhost:8000, you will see the following:
<insert picture>

Notice that `$ sudo docker-compose up` will build the image and run the container accordingly, so simply this command combines `sudo docker build` and `sudo docker run` for each image. And the configuration used to declare when using `sudo docker run` is now defined in docker-compose .yml file. 

Let's see the yml file line by line.
```
version: '3.8'
```
This line defines the version of docker-compose we're using. Check out [official page](https://docs.docker.com/compose/compose-file/) for the differences between different versions.

```
version: '3.8'
		services:
```
